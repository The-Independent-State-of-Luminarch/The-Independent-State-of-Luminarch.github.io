<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<title>{{ page.title }} - {{ site.title }}</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÁî®CSS -->
<style>
:root {
  --bg-color: #ffffff;
  --text-color: #333333;
  --link-color: #0066cc;
  --border-color: #cccccc;
  --nav-hover: #f0f0f0;
}

[data-theme="dark"] {
  --bg-color: #1a1a1a;
  --text-color: #e0e0e0;
  --link-color: #66b3ff;
  --border-color: #444444;
  --nav-hover: #2a2a2a;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg-color: #1a1a1a;
    --text-color: #e0e0e0;
    --link-color: #66b3ff;
    --border-color: #444444;
    --nav-hover: #2a2a2a;
  }
}

html { color-scheme: light dark; }
html[data-theme="dark"] { color-scheme: dark; }
html[data-theme="light"] { color-scheme: light; }

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

a { color: var(--link-color); text-decoration: none; }
a:hover { text-decoration: underline; }
hr { border-color: var(--border-color); }

/* „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Çπ„Çø„Ç§„É´ */
nav {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

nav a {
  padding: 0.5rem 1rem;
  border-radius: 4px;
  transition: background-color 0.3s ease;
}

nav a:hover {
  background-color: var(--nav-hover);
  text-decoration: none;
}

nav a.active {
  background-color: var(--link-color);
  color: white;
}

.theme-toggle {
  background: none;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-color);
  margin-left: auto;
  transition: all 0.3s ease;
}

.theme-toggle:hover { opacity: 0.7; }
[data-theme="dark"] .sun-icon { display: none; }
[data-theme="light"] .moon-icon,
:root:not([data-theme]) .moon-icon { display: none; }
</style>

<script>
(function() {
  const savedTheme = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  } else if (prefersDark) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
})();
</script>

<body style="max-width:900px;margin:2rem auto;padding:0 1rem;font-family:-apple-system,BlinkMacSystemFont,'Hiragino Kaku Gothic ProN','Yu Gothic','Noto Sans JP',sans-serif;line-height:1.7;">

<header>
  <h1>{{ site.title }}</h1>
  <nav>
    <a href="{{ '/' | relative_url }}" 
       {% if page.url == '/' %}class="active"{% endif %}>„Éõ„Éº„É†</a>
    <a href="{{ '/blog' | relative_url }}" 
       {% if page.url == '/blog/' or page.layout == 'post' %}class="active"{% endif %}>ÈñãÁô∫ËÄÖ„Éñ„É≠„Ç∞</a>
    <a href="{{ '/history' | relative_url }}" 
       {% if page.url == '/history/' %}class="active"{% endif %}>Ê≠¥Âè≤</a>
    
    <button id="theme-toggle" class="theme-toggle" aria-label="„ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà">
      <span class="sun-icon">‚òÄÔ∏è</span>
      <span class="moon-icon">üåô</span>
    </button>
  </nav>
  <hr>
</header>

<main>{{ content }}</main>

<footer>
  <hr>
  <small>&copy; {{ site.time | date: "%Y" }}</small>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });
  }
});
</script>

</body>
</html>
