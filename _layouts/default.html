<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<title>{{ page.title }} - {{ site.title }}</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- ダークモード用CSS変数とスクリプト -->
<style>
:root {
  --bg-color: #ffffff;
  --text-color: #333333;
  --link-color: #0066cc;
  --border-color: #cccccc;
}

[data-theme="dark"] {
  --bg-color: #1a1a1a;
  --text-color: #e0e0e0;
  --link-color: #66b3ff;
  --border-color: #444444;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg-color: #1a1a1a;
    --text-color: #e0e0e0;
    --link-color: #66b3ff;
    --border-color: #444444;
  }
}

html {
  color-scheme: light dark;
}

html[data-theme="dark"] { color-scheme: dark; }
html[data-theme="light"] { color-scheme: light; }

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

a { color: var(--link-color); }
hr { border-color: var(--border-color); }

.theme-toggle {
  background: none;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-color);
  margin-left: 1rem;
  transition: all 0.3s ease;
}

.theme-toggle:hover {
  opacity: 0.7;
}

[data-theme="dark"] .sun-icon { display: none; }
[data-theme="light"] .moon-icon,
:root:not([data-theme]) .moon-icon { display: none; }
</style>

<script>
// ページ読み込み前にテーマ適用（ちらつき防止）
(function() {
  const savedTheme = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  } else if (prefersDark) {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
})();
</script>

<body style="max-width:900px;margin:2rem auto;padding:0 1rem;font-family:-apple-system,BlinkMacSystemFont,'Hiragino Kaku Gothic ProN','Yu Gothic','Noto Sans JP',sans-serif;line-height:1.7;">

<header>
  <h1>{{ site.title }}</h1>
  <nav>
    <a href="{{ "/" | relative_url }}">ホーム</a>
    <button id="theme-toggle" class="theme-toggle" aria-label="テーマ切り替え">
      <span class="sun-icon">☀️</span>
      <span class="moon-icon">🌙</span>
    </button>
  </nav>
  <hr>
</header>

<main>{{ content }}</main>

<footer>
  <hr>
  <small>&copy; {{ site.time | date: "%Y" }}</small>
</footer>

<script>
// テーマ切り替え機能
document.addEventListener('DOMContentLoaded', function() {
  const themeToggle = document.getElementById('theme-toggle');
  
  if (themeToggle) {
    themeToggle.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });
  }
});
</script>

</body>
</html>
